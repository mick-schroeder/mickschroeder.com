---
import { buttonVariants, type ButtonVariants } from "@/components/ui/button";
import { cn } from "@/lib/utils";

type Props = {
  variant?: ButtonVariants["variant"];
  size?: ButtonVariants["size"];
  class?: string;
  className?: string;
  href?: string;
  target?: string;
  rel?: string;
  type?: "button" | "submit" | "reset";
  ariaLabel?: string;
  title?: string;
} & Record<string, unknown>;

const {
  variant = "default",
  size = "default",
  class: classAttr = "",
  className = classAttr,
  href,
  target,
  rel,
  type = "button",
  ariaLabel,
  title,
  ...rest
} = Astro.props as Props;

const computedRel = rel || (target === "_blank" ? "noopener noreferrer" : undefined);
const classes = cn(buttonVariants({ variant, size, className }));
---

{href ? (
  <a
    data-slot="button"
    class={classes}
    href={href}
    target={target}
    rel={computedRel}
    aria-label={ariaLabel}
    title={title}
    {...rest}
  >
    <slot />
  </a>
) : (
  <button
    data-slot="button"
    class={classes}
    type={type}
    aria-label={ariaLabel}
    title={title}
    {...rest}
  >
    <slot />
  </button>
)}
