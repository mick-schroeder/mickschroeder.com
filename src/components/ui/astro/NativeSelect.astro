---
import ChevronDown from "@lucide/astro/icons/chevron-down";
import { cn } from "@/lib/utils";

type Props = {
  id?: string;
  value?: string;
  class?: string;
  className?: string;
} & Record<string, unknown>;

const { id, value, class: classAttr = "", className = classAttr, ...rest } = Astro.props as Props;
const baseClasses = [
  "border-input placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground",
  "dark:bg-input/30 dark:hover:bg-input/50",
  "h-9 w-full min-w-0 appearance-none rounded-md border bg-transparent px-3 py-2 pr-9 text-sm shadow-xs transition-[color,box-shadow] outline-none",
  "disabled:pointer-events-none disabled:cursor-not-allowed",
  "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
  "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
];
---

<div
  class="group/native-select relative w-fit has-[select:disabled]:opacity-50"
  data-slot="native-select-wrapper"
>
  <select
    id={id}
    value={value}
    class={cn(baseClasses.join(" "), className)}
    data-slot="native-select"
    {...rest}
  >
    <slot />
  </select>
  <ChevronDown
    class="text-muted-foreground pointer-events-none absolute top-1/2 right-3.5 h-4 w-4 -translate-y-1/2 opacity-50 select-none"
    aria-hidden="true"
    data-slot="native-select-icon"
  />
</div>
